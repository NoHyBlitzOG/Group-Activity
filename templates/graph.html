{% extends "template.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/graph.css') }}">
{% endblock %}

{% block body %}
<div id="content">
    <h1>MRT/LRT Graph - Shortest Path Finder</h1>
    <p class="subtitle">Find the shortest path between MRT and LRT stations using BFS (Breadth-First Search)</p>

    {% if message %}
    <div class="message {% if path %}success{% else %}error{% endif %}">{{ message }}</div>
    {% endif %}

    <form method="POST" action="{{ url_for('graph') }}" class="path-form">
        <div class="form-group">
            <label for="start_station">From Station:</label>
            <select name="start_station" id="start_station" required>
                <option value="">Select start station...</option>
                {% for station in stations %}
                <option value="{{ station }}" {% if start_station == station %}selected{% endif %}>{{ station }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="end_station">To Station:</label>
            <select name="end_station" id="end_station" required>
                <option value="">Select end station...</option>
                {% for station in stations %}
                <option value="{{ station }}" {% if end_station == station %}selected{% endif %}>{{ station }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn-find-path">Find Shortest Path</button>
    </form>

    {% if path %}
    <div class="path-result">
        <h3>Shortest Path:</h3>
        <div class="path-display">
            {% for station in path %}
                <div class="station-node {% if loop.first %}start{% endif %} {% if loop.last %}end{% endif %}">
                    <span class="station-name">{{ station }}</span>
                    {% if not loop.last %}
                        <span class="arrow">â†’</span>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <div class="path-info">
            <p><strong>Total Stations:</strong> {{ path|length }}</p>
            <p><strong>Stations to Travel:</strong> {{ path|length - 1 }}</p>
        </div>
    </div>
    {% endif %}

    <div class="example-section">
        <h3>Example:</h3>
        <p>What is the shortest path from <strong>Station Boni</strong> (MRT Line 3) to <strong>Station v Mapa</strong> (LRT Line 2)?</p>
        <p class="hint">Select "Boni" as the start station and "v Mapa" as the end station, then click "Find Shortest Path".</p>
        <p class="note"><em>Note: This graph includes both MRT and LRT stations connected via transfer stations (Araneta Center-Cubao and Taft Avenue/Quirino).</em></p>
    </div>
</div>
{% endblock %}

